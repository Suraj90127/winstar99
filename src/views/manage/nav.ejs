<!DOCTYPE html>


<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        .nav-link:hover {
            color: black !important;
            background-color: #a1a1ac !important;
        }

        .active {
            background: linear-gradient(to right, #f0f0ff, #ffffff) !important;
            color: #605bff !important;
            box-shadow: none !important;
            border: none !important;
        }

        a:hover {
            background-color: #dee4e3 !important;
            color: white !important;
        }

        a {
            background-color: #fff !important;
        }

        [class*="sidebar-dark-"] .sidebar a {
            color: #a1a1ac;
        }

        [class*="sidebar-dark-"] .nav-sidebar>.nav-item.menu-open>.nav-link,
        [class*="sidebar-dark-"] .nav-sidebar>.nav-item:hover>.nav-link,
        [class*="sidebar-dark-"] .nav-sidebar>.nav-item>.nav-link:focus {
            color: black !important;
            background-color: rgb(249, 249, 249) !important;
        }

        .navbar-dark {
            background-color: #ffffff;
            border-color: #dee2e6;
            padding: 10px 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .btn1 {
            background: linear-gradient(135deg, #605bff, #478ed1);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .btn1:hover {
            background: linear-gradient(135deg, #478ed1, #605bff);
        }
    </style>
</head>

<body>

    <nav class="main-header navbar navbar-expand navbar-dark" style="background-color: white;">
        <ul class="navbar-nav">
            <li>
                <a class="nav-link" style="border-radius: 10px; color: black;" data-widget="pushmenu" href="#"
                    role="button">
                    <i class="fas fa-bars"></i>
                </a>
            </li>
        </ul>
        <ul class="navbar-nav ml-auto">
            <li>
                <a class="nav-link" style="border-radius: 10px; color: black;" data-widget="fullscreen" href="#"
                    role="button">
                    <i class="fas fa-expand-arrows-alt"></i>
                </a>
            </li>
        </ul>
    </nav>

    <aside class="main-sidebar sidebar-dark-primary elevation-4" style="background-color: #fff;">
        <div class="sidebar" style="margin-top: 0;">
            <div class="user-panel mt-3 pb-3 mb-3 d-flex">
                <div class="image">
                    <img src="/images/facebook.png" class="img-circle elevation-2" alt="User  Image" />
                </div>
                <div class="info">
                    <a href="#" class="d-block">
                        <img src="/images/logocm.png" style="width: 150px;" alt="User  Image" />
                    </a>
                </div>
            </div>

            <nav class="mt-2">
                <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu"
                    data-accordion="false">
                    <li class="nav-item" data-permission="Home">
                        <a href="/admin/manager/Home" class="nav-link">
                            <i class="fa-solid fa-house"></i>
                            <p>Home <span class="right badge badge-success">Hot</span></p>
                        </a>
                    </li>
                    <li class="nav-item" data-permission="Create SubPanel">
                        <a href="/admin/manager/createsubpanel" class="nav-link">
                            <i class="fa-solid fa-chalkboard"></i>
                            <p>Create SubPanel<span class="right badge badge-success">Hot</span></p>
                        </a>
                    </li>
                    <li class="nav-item" data-permission="First Deposit Bonus">
                        <a href="/admin/manager/FirstDepositBonus" class="nav-link">
                            <i class="fa-solid fa-money-bill-transfer"></i>
                            <p>First Deposit Bonus <span class="right badge badge-success">Hot</span></p>
                        </a>
                    </li>
                    <li class="nav-item" data-permission="Invitation Bonus">
                        <a href="/admin/manager/InvitationBonus" class="nav-link">
                            <i class="fa-solid fa-money-bill-transfer"></i>
                            <p>Invitation Bonus <span class="right badge badge-success">Hot</span></p>
                        </a>
                    </li>
                    <li class="nav-item" data-permission="Live Chat">
                        <a href="/admin/manager/lives" class="nav-link">
                            <i class="nav-icon fas fa-comments"></i>
                            <p>Live Chat <span class="right badge badge-danger">New</span></p>
                        </a>
                    </li>
                    <li class="nav-item" data-permission="Wingo">
                        <a href="/admin/manager/index" class="nav-link">
                            <i class="nav-icon fas fa-gamepad"></i>
                            <p>Wingo <span class="right badge badge-danger">New</span></p>
                        </a>
                    </li>
                 

                    <li class="nav-item" data-permission="TRX">
                        <a href="/admin/manager/trx" class="nav-link">
                            <i class="nav-icon fas fa-coins"></i>
                            <p>TRX <span class="right badge badge-danger">New</span></p>
                        </a>
                    </li>
                    <li class="nav-item" data-permission="5D">
                        <a href="/admin/manager/5d" class="nav-link">
                            <i class="nav-icon fas fa-dice-five"></i>
                            <p>5D <span class="right badge badge-danger">New</span></p>
                        </a>
                    </li>
                    <li class="nav-item" data-permission="K3">
                        <a href="/admin/manager/k3" class="nav-link">
                            <i class="nav-icon fas fa-dice-three"></i>
                            <p>K3 <span class="right badge badge-danger">New</span></p>
                        </a>
                    </li>
                    <li data-permission="Support Tickets">

                    </li>
                    <li class="nav-item" data-permission="Spin Wheel">
                        <a href="/admin/manager/spinwheel" class="nav-link">
                            <i class="nav-icon fas fa-spinner"></i> <!-- Changed icon -->
                            <p>Spin Wheel</p>
                        </a>
                    </li>
                    <li class="nav-item" data-permission="Illegal Trade">
                        <a href="/admin/manager/llegaltrade" class="nav-link">
                            <i class="nav-icon fas fa-ban"></i> <!-- Changed icon -->
                            <p>Illegal Trade</p>
                        </a>
                    </li>
                    <li class="nav-item" data-permission="Profit & Loss">
                        <a href="/admin/manager/profitloss" class="nav-link">
                            <i class="nav-icon fas fa-chart-pie"></i> <!-- Changed icon -->
                            <p>Profit & Loss</p>
                        </a>
                    </li>
                    <li class="nav-item" data-permission="Member">
                        <a href="/admin/manager/members" class="nav-link">
                            <i class="nav-icon fas fa-users"></i> <!-- Changed icon -->
                            <p>Member</p>
                        </a>
                    </li>
                    <li class="nav-item" data-permission="User Level">
                        <a href="/admin/manager/userlevel" class="nav-link">
                            <i class="nav-icon fas fa-layer-group"></i>
                            <p>User Level</p>
                        </a>
                    </li>


                    <li class="nav-item" data-permission="User Level All">
                        <a href="/admin/manager/userlevelAll" class="nav-link">
                            <i class="nav-icon fas fa-layer-group"></i>
                            <p>User Level All</p>
                        </a>
                    </li>

                    <li class="nav-item" data-permission="Agents">
                        <a href="/admin/manager/ctv" class="nav-link">
                            <i class="nav-icon fas fa-users"></i>
                            <p>Agents</p>
                        </a>
                    </li>
                    
                      <li class="nav-item"  data-permission="Commission History">
                        <a href="/admin/manager/commission" class="nav-link">
                            <i class="nav-icon fas fa-users"></i>
                            <p>Commission History</p>
                        </a>
                    </li>
                    
                    
                    <li class="nav-item" data-permission="demouser">
                        <a href="/admin/manager/demouser" class="nav-link">
                            <i class="nav-icon fas fa-users"></i>
                            <p>Demo Users</p>
                        </a>
                    </li>
                    <li class="nav-item" data-permission="Created Salary">
                        <a href="/admin/manager/CreatedSalaryRecord" class="nav-link">
                            <i class="nav-icon fas fa-money-check-alt"></i>
                            <p>Created Salary</p>
                        </a>
                    </li>
                    <li class="nav-item" data-permission="Level Setting">
                        <a href="/admin/manager/levelSetting" class="nav-link">
                            <i class="nav-icon fas fa-sliders-h"></i>
                            <p>Level Setting</p>
                        </a>
                    </li>
                    <li class="nav-item" data-permission="Business Manage">
                        <a href="/admin/manager/statistical" class="nav-link">
                            <i class="nav-icon fas fa-chart-line"></i>
                            <p>Business Manage</p>
                        </a>
                    </li>
                    <li class="nav-item" data-permission="Pending Recharge">
                        <a href="/admin/manager/recharge" class="nav-link">
                            <i class="nav-icon fas fa-wallet"></i>
                            <p>Pending Recharge</p>
                        </a>
                    </li>
                    <li class="nav-item" data-permission="Pending Withdrawal">
                        <a href="/admin/manager/withdraw" class="nav-link">
                            <i class="nav-icon fas fa-university"></i>
                            <p>Pending Withdrawal</p>
                        </a>
                    </li>
                    <li class="nav-item has-treeview" data-permission="Recharge (Approved)">
                        <a href="/admin/manager/rechargeRecord" class="nav-link">
                            <i class="nav-icon fas fa-history"></i>
                            <p>
                                Recharge (Approved)
                                <i class="right fas fa-angle-left"></i>
                            </p>
                        </a>
                        <ul class="nav nav-treeview">
                            <li>
                                <a href="/admin/manager/allrecharge" class="nav-link">
                                    <i class="far fa-circle nav-icon"></i>
                                    <p>ALL</p>
                                </a>
                            </li>
                            <li>
                                <a href="/admin/manager/successrecharge" class="nav-link">
                                    <i class="far fa-circle nav-icon"></i>
                                    <p>SUCCESS</p>
                                </a>
                            </li>
                            <li>
                                <a href="/admin/manager/pandingrecharge" class="nav-link">
                                    <i class="far fa-circle nav-icon"></i>
                                    <p>PANDING</p>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="/admin/manager/failrecharge" class="nav-link">
                                    <i class="far fa-circle nav-icon"></i>
                                    <p>FAIL</p>
                                </a>
                            </li>
                        </ul>
                    </li>

                    <li class="nav-item" data-permission="Withdrawal (Approved)">
                        <a href="/admin/manager/withdrawRecord" class="nav-link">
                            <i class="nav-icon fas fa-file-alt"></i>
                            <p>Withdrawal (Approved)</p>
                        </a>
                    </li>
                    <li class="nav-item" data-permission="Turnover Report">
                        <a href="/admin/manager/turnover" class="nav-link">
                            <i class="nav-icon fas fa-chart-bar"></i>
                            <p>Turnover Report</p>
                        </a>
                    </li>
                    <li class="nav-item" data-permission="Betting History">
                        <a href="/admin/manager/betting" class="nav-link">
                            <i class="nav-icon fas fa-dice"></i>
                            <p>Betting History</p>
                        </a>
                    </li>
                    <li class="nav-item" data-permission="Today Report">
                        <a href="/admin/manager/today_report" class="nav-link">
                            <i class="nav-icon fas fa-calendar-day"></i>
                            <p>Today Report</p>
                        </a>
                    </li>
                    <li class="nav-item" data-permission="Create Giftcode">
                        <a href="/admin/manager/createBonus" class="nav-link">
                            <i class="nav-icon fas fa-gift"></i>
                            <p>Create Giftcode</p>
                        </a>
                    </li>
                    <li class="nav-item" data-permission="Settings">
                        <a href="/admin/manager/settings" class="nav-link">
                            <i class="nav-icon fas fa-cog"></i>
                            <p>Settings</p>
                        </a>
                    </li>
                    <li class="nav-item" data-permission="Banner">
                        <a href="/admin/manager/banner" class="nav-link">
                            <i class="nav-icon fas fa-image"></i>
                            <p>Banner</p>
                        </a>
                    </li>
                    <li class="nav-item" data-permission="Activity Banner">
                        <a href="/admin/manager/activity-banner" class="nav-link">
                            <i class="nav-icon fas fa-bullhorn"></i>
                            <p>Activity Banner</p>
                        </a>
                    </li>
                    <li class="nav-item" data-permission="Logo Setting">
                        <a href="/admin/manager/logo-setting" class="nav-link">
                            <i class="nav-icon fas fa-pen-nib"></i>
                            <p>Logo Setting</p>
                        </a>
                    </li>
                    <li class="nav-item" data-permission="Channel Setting">
                        <a href="/admin/manager/chennal-setting" class="nav-link">
                            <i class="nav-icon fas fa-network-wired"></i>
                            <p>Channel Setting</p>
                        </a>
                    </li>
                    <li class="nav-item" data-permission="Notification">
                        <a href="/admin/manager/notification" class="nav-link">
                            <i class="nav-icon fas fa-bell"></i>
                            <p>Notification</p>
                        </a>
                    </li>
                    <li class="nav-item has-treeview" data-permission="Recharge (Approved)">
                        <a href="/admin/manager/livechat" class="nav-link">
                            <i class="nav-icon fas fa-history"></i>
                            <p>
                                Live Chat
                                <i class="right fas fa-angle-left"></i>
                            </p>
                        </a>
                        <ul class="nav nav-treeview">
                            <li>
                                <a href="/admin/manager/deposite" class="nav-link">
                                    <i class="far fa-circle nav-icon"></i>
                                    <p>Deposit Not Receive</p>
                                </a>
                            </li>
                            <li>
                                <a href="/admin/manager/withdrawal" class="nav-link">
                                    <i class="far fa-circle nav-icon"></i>
                                    <p>Withdrawal problem</p>
                                </a>
                            </li>
                            <li>
                                <a href="/admin/manager/changeloginid" class="nav-link">
                                    <i class="far fa-circle nav-icon"></i>
                                    <p>Change ID Login Password</p>
                                </a>
                            </li>
                            <li>
                                <a href="/admin/manager/modifyBankInfo" class="nav-link">
                                    <i class="far fa-circle nav-icon"></i>
                                    <p>Modify Bank Information</p>
                                </a>
                            </li>
                            <li>
                                <a href="/admin/manager/usdtAddress" class="nav-link">
                                    <i class="far fa-circle nav-icon"></i>
                                    <p>Add USDT Address</p>
                                </a>
                            </li>
                            <li>
                                <a href="/admin/manager/activityBonus" class="nav-link">
                                    <i class="far fa-circle nav-icon"></i>
                                    <p>Activity Bonus</p>
                                </a>
                            </li>
                            <li>
                                <a href="/admin/manager/gameproblems" class="nav-link">
                                    <i class="far fa-circle nav-icon"></i>
                                    <p>Game Problems</p>
                                </a>
                            </li>

                        </ul>
                    </li>
                    <li class="nav-item" data-permission="Vip Section">
                        <a href="/admin/manager/vipsection" class="nav-link">
                            <i class="fa-solid fa-star"></i>
                            <p>Vip Section</p>
                        </a>
                    </li>
                    <!-- <li class="nav-item" data-permission="Activity Settings">
                    <a href="/admin/manager/activitysettings" class="nav-link">
                        <i class="fa-solid fa-star"></i>
                        <p>Activity Settings</p>
                    </a>
                </li> -->
                    <li class="nav-item">
                        <a href="/home" class="nav-link">
                            <i class="nav-icon fas fa-sign-out-alt"></i>
                            <p>Come Back</p>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </aside>

    <a id="back-to-tops" href="#" class="btn1 back-to-top" role="button" aria-label="Scroll to top">
        <i class="fas fa-chevron-up"></i>
    </a>
    <script>
        async function fetchPermissions() {
            try {
                const navItems = document.querySelectorAll('.nav-item');



                const response = await fetch('/user/permissions', { credentials: 'include' });
                const data = await response.json();

                if (!data.success) {
                    console.error('Failed to fetch permissions');
                    return;
                }

                const userPermissions = data.permissions || {};

                // Show only permitted nav items
                navItems.forEach(item => {
                    const permission = item.getAttribute('data-permission');
                    if (userPermissions[permission] === "1") {
                        item.style.display = 'block';
                    } else {
                        item.style.display = 'none';
                    }
                });

            } catch (error) {
                console.error('Error fetching permissions:', error);
            }
        }

        fetchPermissions();
    </script>

</body>

</html>