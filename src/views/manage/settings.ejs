<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Settings</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700&display=fallback"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
    />
    <link rel="stylesheet" href="/dist/css/adminlte.min.css" />
    <link
      rel="stylesheet"
      href="//cdn.jsdelivr.net/npm/@sweetalert2/theme-dark@4/dark.css"
    />
    <style>
      body {
        background-color: #f4f6f9;
        font-family: "Source Sans Pro", sans-serif;
      }

      .content-wrapper {
        background-color: #ffffff;
        padding: 30px;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }

      h1 {
        color: #605bff;
        font-size: 2.5rem;
        font-weight: 600;
        margin-bottom: 30px;
      }

      .form-group {
        margin-bottom: 30px;
        padding: 20px;
        border-radius: 8px;
        background-color: #f8f9fa;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .form-group label {
        font-weight: bold;
        color: #605bff;
      }

      .form-control {
        border-radius: 5px;
        border: 1px solid #ced4da;
        transition: border-color 0.3s;
      }

      .form-control:focus {
        border-color: #605bff;
        box-shadow: 0 0 5px rgba(55, 73, 146, 0.5);
      }

      .btn-primary {
        background-color: #605bff;
        border: none;
        border-radius: 5px;
        padding: 10px 20px;
        transition: background-color 0.3s;
      }

      .btn-primary:hover {
        background-color: #2c3e50;
      }

      .text-muted {
        font-size: 0.9rem;
      }

      @media (max-width: 768px) {
        .content-wrapper {
          padding: 20px;
        }

        h1 {
          font-size: 1.8rem;
        }
      }
    </style>
  </head>

  <body class="hold-transition sidebar-mini">
    <div class="wrapper">
      <%- include('nav') %>
      <div class="content-wrapper">
        <h1>Settings</h1>
        <div class="container-fluid">
          <div class="row">
            <div class="col-md-12">
              <div class="form-group">
                <label for="demo-id">Make Demo ID</label>
                <input
                  type="text"
                  class="form-control"
                  oninput="value=value.replace(/\D/g,'')"
                  id="demo-id"
                  placeholder="Enter account phone"
                />
                
                 <label for="demo-id">Password ID</label>
                <input
                  type="text"
                  class="form-control"
                  oninput="value=value.replace(/\D/g,'')"
                  id="demo-pass"
                  placeholder="Enter password"
                />
                
                <button
                  type="submit"
                  class="btn btn-primary mt-3"
                  id="demo-username"
                >
                  Submit
                </button>
              </div>

              <div class="form-group">
                <label for="buff-id">Increase | Decrease For Members</label>
                <input
                  type="text"
                  class="form-control mb-3"
                  oninput="value=value.replace(/\D/g,'')"
                  id="buff-id"
                  placeholder="Enter account ID"
                />
                <select class="form-select mb-3" id="buff-acc">
                  <option selected value="">
                    ----------- Select Function ----------
                  </option>
                  <option value="1">Increase (+)</option>
                  <option value="2">Decrease (-)</option>
                </select>
                <input
                  type="text"
                  class="form-control"
                  oninput="value=value.replace(/\D/g,'')"
                  id="buff-money"
                  placeholder="Enter Amount"
                />
                <button
                  type="submit"
                  class="btn btn-primary mt-3"
                  id="buff-username"
                >
                  Submit
                </button>
              </div>

              <div class="form-group">
                <label for="need-id"
                  >Increase | Decrease For Need to Bet Members</label
                >
                <input
                  type="text"
                  class="form-control mb-3"
                  oninput="value=value.replace(/\D/g,'')"
                  id="need-id"
                  placeholder="Enter account ID"
                />
                <select class="form-select mb-3" id="need-acc">
                  <option selected value="">
                    ----------- Select Function ----------
                  </option>
                  <option value="1">Increase (+)</option>
                  <option value="2">Decrease (-)</option>
                </select>
                <input
                  type="text"
                  class="form-control"
                  oninput="value=value.replace(/\D/g,'')"
                  id="need-money"
                  placeholder="Enter Amount"
                />
                <button
                  type="submit"
                  class="btn btn-primary mt-3"
                  id="need-username"
                >
                  Submit
                </button>
              </div>

              <div class="form-group">
                <label for="edit-momo-name_bank">Manual Settings</label>
                <input
                  type="text"
                  class="form-control"
                  placeholder="Bank name"
                  id="edit-momo-name_bank"
                />
                <input
                  type="text"
                  class="form-control mt-2"
                  placeholder="Wallet Owner Name"
                  id="edit-momo-name"
                />
                <input
                  type="text"
                  class="form-control mt-2"
                  placeholder="UPI ID"
                  id="edit-momo-info"
                />
                <input
                  type="text"
                  class="form-control mt-2"
                  placeholder="UPI ID second"
                  id="edit-momo-info2"
                />
                <input
                  type="text"
                  class="form-control mt-2"
                  placeholder="UPI ID third"
                  id="edit-momo-info3"
                />
                <input
                  type="text"
                  class="form-control mt-2"
                  placeholder="USDT Wallet Address"
                  id="edit-momo-qr"
                />
                <button type="submit" class="btn btn-primary mt-3 edit-momo">
                  Submit
                </button>
              </div>

              <div class="form-group">
                <label for="telegram">Telegram</label>
                <input
                  type="text"
                  class="form-control"
                  id="telegram"
                  placeholder="Enter Telegram Link"
                />
                <input
                  type="text"
                  class="form-control mt-2"
                  id="cskh"
                  placeholder="Online Services"
                />
                <input
                  type="text"
                  class="form-control mt-2"
                  id="myapp_web"
                  placeholder="Enter App Link"
                />
                <button type="submit" class="btn btn-primary mt-3 telegram">
                  Submit
                </button>
              </div>

              <div class="form-group">
                <label for="phoneA">Add USDT</label>
                <input
                  type="text"
                  class="form-control"
                  id="phoneA"
                  placeholder="Enter phone"
                />
                <input
                  type="text"
                  class="form-control mt-2"
                  id="usdtA"
                  placeholder="Enter USDT"
                />
                <button
                  type="submit"
                  class="btn btn-primary mt-3"
                  onclick="MyUsdt()"
                >
                  Submit
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="/plugins/jquery/jquery.min.js"></script>
    <script src="/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="/dist/js/adminlte.min.js"></script>
    <script src="/js/admin/admin.js"></script>
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.js"></script>
    <script>
     
     
         
    
    function MyUsdt(){
    let phoneA=$("#phoneA").val().trim()
    let usdtA=$("#usdtA").val().trim()
    
     $.ajax({
            type: "POST",
            url: "/admin/manager/addust",
            data: "data",
                 data: {
                    phone: phoneA,
                    usdt: usdtA,
                },
                dataType: "json",
            success: function (response) {
            if (response.status) {
                        Swal.fire(
                            'Good job!',
                            'You clicked the button!',
                            'success'
                        )
                    } else if (response.message == 2) {
                        Swal.fire({
                            icon: 'error',
                            title: 'Phone number does not exist',
                        })
                    } else {
                        Swal.fire({
                            icon: 'error',
                            title: 'An unknown error !',
                        })
                    }
            }
        });
        
    }
    
    
    
      function sendRequest(params1, params2, typer) {
        $.ajax({
          type: "POST",
          url: "/manage/admin/settings",
          data: {
            params1: params1,
            params2: params2,
            typer: typer,
          },
          dataType: "json",
          success: function (response) {
            Swal.fire("Good job!", "You clicked the button!", "success");
          },
        });
      }

      function sendRequestBank(
        name_bank = "",
        name = "",
        info = "",
        qr = "",
        typer = ""
      ) {
        $.ajax({
          type: "POST",
          url: "/admin/manager/settings/bank",
          data: {
            name_bank: name_bank,
            name: name,
            info: info,
            qr: qr,
            typer: typer,
          },
          dataType: "json",
          success: function (response) {
            Swal.fire("Good job!", "Updated Successfully!", "success");
          },
        });
      }
      $(".buff-money").click(function (e) {
        e.preventDefault();
        const phone = $("#buff-phone").val();
        const money = $("#buff-money").val();
        const checkMoney = $.isNumeric(money);
        if (phone && checkMoney) {
          sendRequest(phone, money, "buff");
        } else {
          Swal.fire({
            icon: "error",
            title: "Empty or Wrong Details",
          });
        }
      });

      const alertMessage = (text) => {
        const msg = document.createElement("div");
        msg.setAttribute("data-v-1dcba851", "");
        msg.className = "msg";

        const msgContent = document.createElement("div");
        msgContent.setAttribute("data-v-1dcba851", "");
        msgContent.className = "msg-content v-enter-active v-enter-to";
        msgContent.style = "";
        msgContent.textContent = text;

        msg.appendChild(msgContent);
        document.body.appendChild(msg);

        setTimeout(() => {
          msgContent.classList.remove("v-enter-active", "v-enter-to");
          msgContent.classList.add("v-leave-active", "v-leave-to");

          setTimeout(() => {
            document.body.removeChild(msg);
          }, 100);
        }, 1000);
      };

      //   $(".edit-momo").click(async (e) => {
      //     try {
      //       e.preventDefault();
      //       const bank_name = $("#edit-momo-name_bank").val();
      //       const username = $("#edit-momo-name").val();
      //       const upi_id = $("#edit-momo-info").val();
      //       const upi_id2 = $("#edit-momo-info2").val();
      //       const upi_id3 = $("#edit-momo-info3").val();
      //       const usdt_wallet_address = $("#edit-momo-qr").val();

      //       const response = await axios.post("/admin/manager/settings/bank", {
      //         bank_name,
      //         username,
      //         upi_id,
      //         upi_id2,
      //         upi_id3,
      //         usdt_wallet_address,
      //         typer: "bank",
      //       });

      //       if (response.data.status == true) {
      //         Swal.fire(
      //           "Good job!",
      //           "Your Links Updated Successfully!",
      //           "success"
      //         );
      //       } else {
      //         Swal.fire({
      //           icon: "error",
      //           title: "Empty or Wrong",
      //         });
      //       }
      //     } catch (error) {
      //       console.log(error);
      //     }
      //   });

      $(".edit-momo").click(function (e) {
        e.preventDefault();
        const bank_name = $("#edit-momo-name_bank").val();
        const username = $("#edit-momo-name").val();
        const upi_id = $("#edit-momo-info").val();
        const upi_id2 = $("#edit-momo-info2").val();
        const upi_id3 = $("#edit-momo-info3").val();
        const usdt_wallet_address = $("#edit-momo-qr").val();
        $.ajax({
          type: "POST",
          url: "/admin/manager/settings/bank",
          data: {
            bank_name,
            username,
            upi_id,
            upi_id2,
            upi_id3,
            usdt_wallet_address,
            typer: "bank",
          },
          dataType: "json",
          success: function (response) {
            if (response.status == true) {
              Swal.fire(
                "Good job!",
                "Your Links Updated Successfully!",
                "success"
              );
            } else {
              Swal.fire({
                icon: "error",
                title: "Empty or Wrong",
              });
            }
          },
        });
      });

      $(".telegram").click(function (e) {
        e.preventDefault();
        const telegram = $("#telegram").val();
        const cskh = $("#cskh").val();
        const myapp_web = $("#myapp_web").val();
        $.ajax({
          type: "POST",
          url: "/admin/manager/settings/cskh",
          data: {
            telegram: telegram,
            cskh: cskh,
            myapp_web: myapp_web,
          },
          dataType: "json",
          success: function (response) {
            if (response.status == true) {
              Swal.fire(
                "Good job!",
                "Your Links Updated Successfully!",
                "success"
              );
            } else {
              Swal.fire({
                icon: "error",
                title: "Empty or Wrong",
              });
            }
          },
        });
      });

      $("#need-username").click(function (e) {
        e.preventDefault();
        let id_user = $("#need-id").val().trim();
        let buff_acc = $("#need-acc").val().trim();
        let money_value = $("#need-money").val().trim();
        if (id_user && buff_acc && money_value) {
          $.ajax({
            type: "POST",
            url: "/admin/manager/settings/need",
            data: {
              id_user: id_user,
              buff_acc: buff_acc,
              money_value: money_value,
            },
            dataType: "json",
            success: function (response) {
              if (response.status == true) {
                Swal.fire("Good job!", "Data Added Successfully!", "success");
              } else {
                Swal.fire({
                  icon: "error",
                  title: "User ID does not exist",
                });
              }
            },
          });
        } else {
          Swal.fire({
            icon: "error",
            title: "Please enter complete information",
          });
        }
      });

      $("#buff-username").click(function (e) {
        e.preventDefault();
        let id_user = $("#buff-id").val().trim();
        let buff_acc = $("#buff-acc").val().trim();
        let money_value = $("#buff-money").val().trim();
        if (id_user && buff_acc && money_value) {
          $.ajax({
            type: "POST",
            url: "/admin/manager/settings/buff",
            data: {
              id_user: id_user,
              buff_acc: buff_acc,
              money_value: money_value,
            },
            dataType: "json",
            success: function (response) {
              if (response.status == true) {
                Swal.fire("Good job!", "Data Added Successfully!", "success");
              } else {
                Swal.fire({
                  icon: "error",
                  title: "User ID does not exist",
                });
              }
            },
          });
        } else {
          Swal.fire({
            icon: "error",
            title: "Please enter complete information",
          });
        }
      });

      $("#demo-username").click(function (e) {
        e.preventDefault();
        let id_user = $("#demo-id").val().trim();
        let user_pass = $("#demo-pass").val().trim();

        if (id_user) {
          $.ajax({
            type: "POST",
            url: "/admin/manager/settings/demo",
            data: {
              username: id_user,
              password:user_pass,
            },
            dataType: "json",
            success: function (response) {
              if (response.status == true) {
                Swal.fire("Good job!", "Data Added Successfully!", "success");
              } else {
                Swal.fire({
                  icon: "error",
                  title: "User ID does not exist",
                });
              }
            },
          });
        } else {
          Swal.fire({
            icon: "error",
            title: "Please enter complete information",
          });
        }
      });
      
      
      
      
       $.ajax({
            type: "POST",
            url: "/admin/manager/settings/get",
            data: "data",
            dataType: "json",
            success: function (response) {
                let bank = response.datas[0];
                let momo = response.datas[0];
                console.log("FFF",momo)
                $('#edit-momo-name_bank').val(momo?.name_bank);
                $('#edit-momo-name').val(momo.name_user);
                $('#edit-momo-info').val(momo.stk);
                 $('#edit-momo-info2').val(momo.upi2);
                  $('#edit-momo-info3').val(momo.upi3);
                $('#edit-momo-qr').val(momo.usdt);

                // $('#edit-momo-qr').val(momo.qr_code_image);

                $('#telegram').val(response.settings[0].telegram);
                $('#cskh').val(response.settings[0].cskh);
                $('#myapp_web').val(response.settings[0].app);
            }
        });
    </script>
  </body>
</html>
